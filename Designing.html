<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        canvas {
            background: #eeeeee;
            display: block;
            margin: 0 auto;
        }
    </style>


</head>
<body>
<div>
    <canvas id="myCanvas" width="480" height="320"></canvas>
</div>
<script>
    var canvas = document.getElementById("myCanvas");
    var ctx = canvas.getContext("2d");

    var nucleusImage = document.createElement("img");
    nucleusImage.src = "Resources/Nucleus.png";

    var electronImage = document.createElement("img");
    electronImage.src = "Resources/Electrons.png";

    var sharedElectronImage = document.createElement("img");
    sharedElectronImage.src = "Resources/Shared Electron.png";


    let electronConfig = [];


    function drawNucleus(nucleusX, nucleusY, zIndex) {

//        ctx.arc(nucleusX - 30, nucleusY, 30, 0, Math.PI * 2);
//        nucleusImage.style.left = nucleusX + "px";
//        nucleusImage.style.top = nucleusY + "px";
//        nucleusImage.style.zIndex = 1000;
        ctx.drawImage(nucleusImage, nucleusX, nucleusY)

    }

    class electronPair {
        constructor(centreX, centreY, horizontal, pairNo, share) {
            this.centreX = centreX;
            this.centreY = centreY;
            this.horizontal = horizontal;
            switch (pairNo) {
                case 1:
                    this.x = -10;
                    this.y = 0;
                    break;
                case 2:
                    this.x = 0;
                    this.y = Math.sqrt(25 * 25 - 6.25 * this.x * this.x);
                    break;
                case 3:
                    this.x = 10;
                    this.y = Math.sqrt(25 * 25 - 6.25 * this.x * this.x);
            }
            this.dx = 0.5;
            this.dy = 1;
            this.share = share;
            this.radius = 5;

        }

        updatePosition() {
            this.x -= this.dx;
            this.y = Math.sqrt(25 * 25 - 6.25 * this.x * this.x);
            this.y *= this.dy;

            if (this.x <= -10) {
                this.dx = -0.5;
                this.dy = -1;
            } else if (this.x >= 10) {
                this.dx = 0.5;
                this.dy = 1;
            }
        }


        drawElectron() {
            if (this.horizontal) {
                if (this.share) {
                    ctx.beginPath();
                    ctx.drawImage(sharedElectronImage, canvas.width / 2 - this.y - this.radius - this.centreX, canvas.height / 2 - this.radius - this.x - this.centreY);
                    ctx.drawImage(sharedElectronImage, canvas.width / 2 + this.y - this.radius - this.centreX, canvas.height / 2 - this.radius + this.x - this.centreY);
                    ctx.fill();
                    ctx.closePath();
                } else {
                    ctx.beginPath();
                    ctx.drawImage(electronImage, canvas.width / 2 - this.radius - this.y - this.centreX, canvas.height / 2 - this.radius - this.x - this.centreY);
                    ctx.drawImage(electronImage, canvas.width / 2 - this.radius + this.y - this.centreX, canvas.height / 2 - this.radius + this.x - this.centreY);
                    ctx.fill();
                    ctx.closePath();
                }
            } else {
                if (this.share) {
                    ctx.beginPath();
                    ctx.drawImage(sharedElectronImage, canvas.width / 2 - this.x - this.radius - this.centreX, canvas.height / 2 - this.radius + this.y);
                    ctx.drawImage(sharedElectronImage, canvas.width / 2 + this.x - this.radius - this.centreX, canvas.height / 2 - this.radius - this.y);
                    ctx.fill();
                    ctx.closePath();
                } else {
                    ctx.beginPath();
                    ctx.drawImage(electronImage, canvas.width / 2 - this.radius - this.x - this.centreX, canvas.height / 2 - this.radius + this.y);
                    ctx.drawImage(electronImage, canvas.width / 2 - this.radius + this.x - this.centreX, canvas.height / 2 - this.radius - this.y);
                    ctx.fill();
                    ctx.closePath();
                }

            }
        }
    }


    //    class electronPair {
    //
    //        constructor(share, radius, posX, posY, xShift, yShift) {
    //            if (share) {
    //                ctx.beginPath();
    //                ctx.drawImage(sharedElectronImage, canvas.width / 2 - posX - radius - xShift, canvas.height / 2 + posY - radius - yShift);
    //                ctx.drawImage(sharedElectronImage, canvas.width / 2 + posX - radius - xShift, canvas.height / 2 - posY - radius - yShift);
    //                ctx.fill();
    //                ctx.closePath();
    //            } else {
    //                ctx.beginPath();
    //                ctx.drawImage(electronImage, canvas.width / 2 - posX - radius - xShift, canvas.height / 2 + posY - radius - yShift);
    //                ctx.drawImage(electronImage, canvas.width / 2 + posX - radius - xShift, canvas.height / 2 - posY - radius - yShift);
    //                ctx.fill();
    //                ctx.closePath();
    //            }
    //            this.x = posX;
    //            this.y = posY;
    ////            this.dx = dx;
    ////            this.dy = dy
    //
    //
    //        }
    //
    //        calculatePosition(x,y,dx,dy){
    //            x -= dx;
    //            calc = 25 * 25 - 6.25 * x * x;
    //            y = Math.sqrt(calc);
    //            y *= dy1;
    //
    //            if (x <= -10) {
    //                dx = -0.5;
    //                dy = -1;
    //            } else if (x >= 10) {
    //                dx = 0.5;
    //                dy = 1;
    //            }
    //
    //        }
    //    }

    class compoundElectronConfig {
        constructor(formula) {
            this.centre = 30;
            switch (formula.length) {
                case 1:

                    this.atoms = 1;
                    this.pair1 = new electronPair(this.centre, this.centre,false,1,false);
                    this.pair2 = new electronPair(this.centre, this.centre,true,1,false);
                    this.pair3 = new electronPair(-this.centre, -this.centre,false,1,true);
                    this.pair4 = new electronPair(-this.centre, -this.centre,true,1,false);
                    break;

                case 3:

                    this.atoms = 2;
                    this.pair1 = new electronPair(this.centre + 31,this.centre,false,1,false);
                    this.pair2 = new electronPair(this.centre,this.centre,true,1,false);
                    this.pair3 = new electronPair(-this.centre + 31, this.centre,false,1,true);
                    this.pair4 = new electronPair(this.centre,- this.centre,true,1,false);
//                    this.pair5 = new electronPair(this.centre - 31,this.centre,false,1,false);
                    this.pair6 = new electronPair(this.centre - 61,this.centre,true,1,false);
                    this.pair7 = new electronPair(-this.centre - 31, this.centre,false,1,false);
                    this.pair8 = new electronPair(this.centre - 61,- this.centre,true,1,false);
                    break;

                case 5:

                    this.atoms = 3;
                    break;
            }

            this.formula = formula;

        }

        drawCompound() {
            switch(this.atoms){
                case 1:
                    drawNucleus(canvas.width/2 - this.centre,canvas.height/2 - this.centre);
                    this.pair1.drawElectron();
                    this.pair2.drawElectron();
                    this.pair3.drawElectron();
                    this.pair4.drawElectron();
                    this.pair1.updatePosition();
                    this.pair2.updatePosition();
                    this.pair3.updatePosition();
                    this.pair4.updatePosition();
                    break;


                case 2:

                    this.pair1.drawElectron();
                    this.pair4.drawElectron();
                    drawNucleus(canvas.width/2 - this.centre - 31,canvas.height/2 - this.centre);
                    this.pair2.drawElectron();
                    this.pair3.drawElectron();

//                    this.pair5.drawElectron();
                    this.pair8.drawElectron();
                    drawNucleus(canvas.width/2 - this.centre + 31,canvas.height/2 - this.centre);
                    this.pair6.drawElectron();
                    this.pair7.drawElectron();


                    this.pair1.updatePosition();
                    this.pair2.updatePosition();
                    this.pair3.updatePosition();
                    this.pair4.updatePosition();
//                    this.pair5.updatePosition();
                    this.pair6.updatePosition();
                    this.pair7.updatePosition();
                    this.pair8.updatePosition();


//                    drawNucleus(canvas.width/2 + this.centre,canvas.height/2 - 30);
                    break;
                case 3:
                    drawNucleus(30,30);
                    break;
            }
//

        }

//        updatePosition(electron) {
////        x -= dx;
////        calc = 25 * 25 - 6.25 * x * x;
////        y = Math.sqrt(calc);
////        y *= dy1;
////
////        if (x <= -10) {
////            dx = -0.5;
////            dy = -1;
////        } else if (x >= 10) {
////            dx = 0.5;
////            dy = 1;
////        }
//        }
    }


    //    function drawElectronPairs() {
    //        switch (sharedElectrons) {
    //            case 2:
    //                let pair1 = new electronPair(true, 5, X1, Y1, 0, 0);
    //
    //                let pair2 = new electronPair(false, 5, X1, Y1, 60, 0);
    //
    //                let pair3 = new electronPair(false, 5, -Y1, X1, 30, -30);
    //
    //                let pair4 = new electronPair(false, 5, -Y1, X1, 30, 30);
    //
    //                electronConfig = [pair1, pair2, pair3, pair4];
    //                break;
    //
    //            case 4:
    //                let pair5 = new electronPair(true, 5, X1, Y1, 0, 0);
    //
    //                let pair6 = new electronPair(true, 5, X2, Y2, 0, 0);
    //
    //                let pair7 = new electronPair(false, 5, -Y1, X1, 30, -30);
    //
    //                let pair8 = new electronPair(false, 5, -Y1, X1, 30, 30);
    //                electronConfig = [pair5, pair6, pair7, pair8];
    //                break;
    //
    //            case 6:
    //                let pair9 = new electronPair(true, 5, X1, Y1, 0, 0);
    //
    //                let pair10 = new electronPair(true, 5, X2, Y2, 0, 0);
    //
    //                let pair11 = new electronPair(true, 5, X3, Y3, 0, 0);
    //
    //                let pair12 = new electronPair(false, 5, X1, Y1, 60, 0);
    //                electronConfig = [pair9, pair10, pair11, pair8];
    //
    //        }
    //    }

    no = new compoundElectronConfig(["O", "O", "O"]);

    function draw() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        no.drawCompound();




        requestAnimationFrame(draw);
    }

    draw();
</script>
</body>
</html>
